var Amber=function(e){function n(o){if(t[o])return t[o].exports;var s=t[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";var o=t(1);e.exports={Socket:o.Socket}},function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Socket=void 0;var s=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=t(2);n.Socket=function(){function e(n){o(this,e),this.endpoint=n,this.ws=null,this.channels=[]}return s(e,[{key:"connect",value:function(e){var n=this,t={location:window.location.hostname,port:window.location.port,protocol:"https:"===window.location.protocol?"wss:":"ws:"};return e&&Object.assign(t,e),t.port&&(t.location+=":"+t.port),new Promise(function(e,o){n.ws=new WebSocket(t.protocol+"//"+t.location+n.endpoint),n.ws.onmessage=function(e){n.handleMessage(e)},n.ws.onopen=function(){return e()}})}},{key:"channel",value:function(e){var n=new i.Channel(e,this);return this.channels.push(n),n}},{key:"handleMessage",value:function(e){e=JSON.parse(e.data),this.channels.forEach(function(n){n.topic===e.topic&&n.handleMessage(e)})}}]),e}()},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),s={join:"join",leave:"leave",message:"message"};n.Channel=function(){function e(n,o){t(this,e),this.topic=n,this.socket=o,this.onMessageHandlers=[]}return o(e,[{key:"join",value:function(){this.socket.ws.send(JSON.stringify({event:s.join,topic:this.topic}))}},{key:"leave",value:function(){this.socket.ws.send(JSON.stringify({event:s.message,topic:this.topic}))}},{key:"handleMessage",value:function(e){this.onMessageHandlers.forEach(function(n){n.subject===e.subject&&n.callback(e.payload)})}},{key:"on",value:function(e,n){this.onMessageHandlers.push({subject:e,callback:n})}},{key:"push",value:function(e,n){this.socket.ws.send(JSON.stringify({event:s.message,topic:this.topic,subject:e,payload:n}))}}]),e}()}]);